<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <title>Product Details</title>
  </head>
  <body>
    <h1>Products Details</h1>

    <div id="container"></div>
    <script>
//         const num = Number(localStorage.getItem('productId'));
// var url = `https://localhost:44330/api/Products/getProductsBasedOnCategoryId/${num}`;

// async function getProductsDetails() {
//   let request = await fetch(url);

//   let data = await request.json();
//   let cards = document.getElementById("container");
//   data.forEach(element => {
//   cards.innerHTML += `
//          <div class="card" style="width: 18rem;">
//             <img src="${element.productImage}" class="card-img-top" alt=;
//             <div class="card-body">
//                 <h5 class="card-title">${element.productName}</h5>
//                 <h4 ">Price: ${element.price}</h4>
//                 <p>${element.description}</p>
//             </div>
//         </div>`;
//   });
//   console.log(data);


// };

// getProductsDetails();
const num = Number(localStorage.getItem('productId'));
var url = `https://localhost:44330/api/Products/getProductById?id=${num}`;
async function getProductsDetails() {
  let request = await fetch(url);
  data = await request.json(); 

  let cards = document.getElementById("container");
  data.forEach(element => {
    cards.innerHTML += `
      <div class="card" style="width: 18rem;">
          <img src="${element.productImage}" class="card-img-top" alt="Product Image">
          <div class="card-body">
              <h5 class="card-title">${element.productName}</h5>
              <h4>Price: ${element.price}</h4>
              <p>${element.description}</p>
              <div>
                  <label for="quantity-${element.productId}">Quantity:</label>
                  <input type="number" id="quant" class="form-control" value="1" min="1">
              </div>
              <button class="btn btn-primary mt-2" onclick="Store(${element.productId})">Store</button>
              <button class="btn btn-primary mt-2" onclick="addToCart(${element.productId})">Add to Cart</button>
          </div>
      </div>`;
  });

  console.log(data);
}

getProductsDetails();

function Store(id) {localStorage.cartId = 1, localStorage.productId =id}

const url1="https://localhost:44330/api/CartIItem";
async function addToCart() {
  debugger;
  var Quntity=document.getElementById("quant");
   var request=await fetch(url1,
   {
     method:'POST',
     headers:{'Content-Type':'application/json'},
     body:JSON.stringify({

cartId:localStorage.cartId,
productId:localStorage.getItem("productId"),
quantity:Quntity.value
     })

});

alert("Item Add Successfully");

window.location = "Cart.html"
}

    </script>
</body>
</html>